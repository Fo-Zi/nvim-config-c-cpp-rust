local null_ls = require('null-ls')

null_ls.setup({
  sources = {
    -- Format C and C++ files with clang-format
    null_ls.builtins.formatting.clang_format.with({
      filetypes = { "c", "cpp" },
    }),
    
    -- Format Rust files with rustfmt
    null_ls.builtins.formatting.rustfmt.with({
      filetypes = { "rust" },
    }),
  },
})

-- Automatically format on save
vim.cmd('autocmd BufWritePre *.c,*.cpp,*.rs lua vim.lsp.buf.formatting_sync()')
